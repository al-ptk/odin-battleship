(()=>{"use strict";var e={316:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&display=swap);"]),a.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: rgba(141, 141, 141, 0.5);\n}\n\n#app {\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n\n  background-color: rgb(223, 48, 48);\n}\n\n@media screen and (min-width: 500px) {\n  #app {\n    margin-top: 100px;\n    width: 360px;\n    height: 720px;\n  }\n}\n\nbutton.fancy {\n  width: 309px;\n  height: 162px;\n\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.92) -11.64%,\n    rgb(34, 34, 34) 19.75%,\n    rgb(34, 34, 34) 19.75%,\n    rgba(0, 0, 0, 0.92) 112.35%\n  );\n  box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 5px;\n  border-style: none;\n}\n\n.fancyLetters {\n  color: white;\n  font-size: 32px;\n  font-family: 'Cormorant Garamond', serif;\n  font-weight: 500;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 50px;\n}\n\n.board {\n  width: 80%;\n  aspect-ratio: 1 / 1;\n  background-color: rgba(211, 211, 211, 0.959);\n  display: grid;\n  grid-template-rows: repeat(10, 1fr);\n  grid-template-columns: repeat(10, 1fr);\n  gap: 1px;\n}\n\n.stopper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  padding-top: 35vh;\n  background-color: rgba(68, 68, 68, 0.185);\n  z-index: 20;\n}\n\n#game-view {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 60px;\n  padding: 12.5%;\n}\n\n.toggle-orientation {\n  /* position: absolute;\n  bottom: 70px;\n  left: 20px; */\n  /* z-index: 10; */\n  width: 42px;\n  height: 42px;\n}\n\n.picker-container {\n  /*Outer Layout*/\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 200px;\n  \n  /* Styling */\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.92) -11.64%,\n    rgb(34, 34, 34) 19.75%,\n    rgb(34, 34, 34) 19.75%,\n    rgba(0, 0, 0, 0.92) 112.35%\n  );\n  border-radius: 5px 5px 0 0;\n\n  /* Inner Layout */\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 0 10px;\n}\n\n.mock-cell {\n  width: 30px;\n  height: 30px;\n  background-color: white;\n}\n\n.active-ship {\n  border: 3px solid rgb(212, 24, 24);\n}\n\n.picker-counter {\n  width: 1.5em;\n  height: 1.5em;\n  border-radius: 50%;\n  background-color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.board {\n  width: 300px;\n  height: 300px;\n}",""]);const c=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var p=0;p<e.length;p++){var l=[].concat(e[p]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],p=r.base?s[0]+r.base:s[0],l=i[p]||0,d="".concat(p," ").concat(l);i[p]=l+1;var u=n(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=o(h,r);r.byIndex=c,t.splice(c,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=n(i[a]);t[c].references--}for(var s=r(e,o),p=0;p<i.length;p++){var l=n(i[p]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=s}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),o=n.n(r),i=n(569),c=n.n(i),s=n(565),p=n.n(s),l=n(216),d=n.n(l),u=n(589),h=n.n(u),f=n(316),g={};function m(){const e=document.createElement("button");return e.classList.add("fancy","fancyLetters"),e}function y(e){const t=document.createElement("div");t.addEventListener("click",(e=>{e.stopPropagation()})),t.classList.add("stopper");const n=m();return n.textContent=`game over. player ${e.getCurrentPlayer()+1} wins`,n.addEventListener("click",(n=>{t.parentNode.remove(),setTimeout((()=>e.puppeteer("title-screen")),225)})),n.style.padding="15px",t.appendChild(n),t}function v(e){const t=document.createElement("div");t.classList.add("board");for(let e=0;e<100;e++){const n=document.createElement("div");n.classList.add("board-cell"),t.appendChild(n),n.style.backgroundColor="white",n.id=`c${e}`}return t}g.styleTagTransform=h(),g.setAttributes=p(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),t()(f.Z,g),f.Z&&f.Z.locals&&f.Z.locals,document.querySelector("#app"),document.querySelector("#app"),document.querySelector("#app");const b=n.p+"14534bcfe7aaa3c5949f.svg",x=n.p+"8981b45fb3bc88616678.svg",k=n.p+"be0b1f670334839a6946.svg";function C(){const e=document.createElement("img");return e.src=b,e.style.width="24px",e.style.height="24px",e}function S(e,t,n){const r=document.createElement("img");return r.src=e?x:k,n||(r.style.transform="rotate(90deg)"),t||n||(r.style.transform="rotate(270deg)"),t&&n&&(r.style.transform="rotate(-180deg)"),r.style.width="105%",r.style.height="105%",r}function w(e,t){for(const n of t){const r=e.children[n];if(void 0===r)throw console.log(t),new Error("wut?");const o=C();o.style.position="absolute",o.style.zIndex="10",r.appendChild(o)}}function E(e,t,n=!1){for(const r of t){const t=r.getOrientation(),o=r.getBoundaries();for(let i=0;i<o.length;i++)n?"hit"===r.getSegments()[o[i]]&&L(e,o,i,t):L(e,o,i,t)}}function L(e,t,n,r){const o=e.children[t[n]];o.style.position="relative";const i=0===n,a=n===t.length-1,c=S(i|a,a,r);c.style.position="absolute",c.style.zIndex="5",o.appendChild(c)}function A(e,t){const n=document.createElement("div"),r=v();if(e)w(r,t.getCurrentData().marks),E(r,t.getCurrentData().ships);else{for(const e of r.children)e.addEventListener("click",(e=>{const o=e.target.id.slice(1);if(t.registerAttack(parseInt(o)))return E(r,t.getEnemyData().sunk),w(r,t.getEnemyData().marks),void setTimeout((()=>{n.parentNode.appendChild(y(t))}),400);E(r,t.getEnemyData().ships,!0),w(r,t.getEnemyData().marks),t.cyclePlayer(),setTimeout((()=>{n.parentNode.remove(),t.puppeteer("next-player")}),400)}));E(r,t.getEnemyData().ships,!0),w(r,t.getEnemyData().marks)}return n.appendChild(r),n}function j(e=0,t,n){return n||(n=1),[...Array(t).keys()].map((t=>t*n+e))}const P=10;let M={},O=[],T={size:0,2:1,3:1,4:1,5:1};function I(e){return e.filter((e=>Object.keys(M).includes(e.toString()))).length}function N(e){const t=Math.trunc(e[0]/P);return e.reduce(((e,n)=>Math.trunc(n/P)===t&&e),!0)}function z(e){return e.reduce(((e,t)=>t/P<P&&e),!0)}function $(e){const t=e[0]%P==e[1]%P;for(let n=0;n<e.length;n++){const r=document.querySelector(`#c${e[n]}`);r.style.position="relative";const o=0===n,i=n===e.length-1,a=S(o|i,i,t);a.style.position="absolute",a.style.zIndex="5",a.addEventListener("click",D),r.appendChild(a)}}function D(e){const t=e.target.parentNode.id.slice(1),n=M[t];R(n.length,!0);for(let e=0;e<O.length;e++)if(O[e][0]===n[0]){O.splice(e,1);break}for(const e of n)document.querySelector(`#c${e}`).innerHTML="",delete M[e]}function q(e){const t=document.createElement("div");for(let n=0;n<e;n++){const e=document.createElement("div");e.classList.add("mock-cell"),t.appendChild(e)}return t}function B(e){const t=document.createElement("div");t.classList.add("picker-counter");const n=document.createElement("p");return n.id=`amount${e}`,n.textContent=T[e],t.appendChild(n),t}function R(e,t){T[e]+=2*t-1,document.querySelector(`#amount${e}`).textContent=T[e]}function H(){let e=!0;for(let t=5;t>1;t--)e&=0===T[t];return e}function Z(e){const t=function(e){const t=[],n=[],r=[],o={};function i(t){const n=Math.trunc(t[0]/e);return t.reduce(((t,r)=>Math.trunc(r/e)===n&&t),!0)}function a(t){return t.reduce(((t,n)=>Math.trunc(n/e)<e&&t),!0)}function c(e){return e.filter((e=>Object.keys(o).includes(e.toString()))).length}function s(t,r,i){const a=function(e,t,n,r){const o=Object.fromEntries(j(e,n,r*t).map((e=>[e,"a"])));return{getBoundaries:function(){return Object.keys(o)},hit:function(e){return!!Object.keys(o).includes(e.toString())&&(o[e]="hit","hit")},isSunk:function(){return Object.values(o).reduce(((e,t)=>"hit"===t&&e),!0)},getOrientation:function(){return t},getSegments:function(){return o}}}(t,r,i,e);return Object.assign(o,Object.fromEntries(a.getBoundaries().map((e=>[e,a])))),n.push(a),!0}return{getMarkedCells:function(){return t},receiveAttack:function(e){e=e.toString(),t.push(e);const n=Object.keys(o).includes(e),i=!!n&&o[e].hit(e);return n&&o[e].isSunk()?(r.push(o[e]),"sunk"):i},placeShip:function(t,n,r){if(void 0===t||void 0===n||void 0===r)throw new Error("Invalid Input");const o=j(t,r,n*e);if(!(n?a(o):i(o)))throw new Error("Invalid Position");if(c(o))throw new Error("Spot Taken");return s(t,n,r)},allShipsSunk:function(){return n.reduce(((e,t)=>t.isSunk()&&e),!0)},placeRandomShip:function(t,n=100){let r,o,p=!0,l=!1;do{p=Math.random()>=.5,r=Math.trunc(Math.random()*n),o=j(r,t,p*e),l=p?a(o):i(o)}while(!l||c(o));return s(r,p,t),`empty spot at ${o}`},peekAtShips:function(){return n},getShipIndexes:function(){return Object.keys(o)},getSunkShips:function(){return r}}}(e);function n(e,n=100){return t.placeRandomShip(e,n)}return{deployShip:function(e,n,r){try{t.placeShip(e,n,r)}catch(e){throw e}},receiveAttack:function(e){const n=t.receiveAttack(e);return"sunk"===n||(n?"hit":"miss")},allShipsSunk:function(){return t.allShipsSunk()},placeRandomShip:n,getMarkedCells:function(){return t.getMarkedCells()},setRandomBoard:function(){for(let e=2;e<6;e++)n(e)},peekAtShips:function(){return t.peekAtShips()},peekAtShipIndexes:function(){return t.getShipIndexes()},getSunkShips:function(){return t.getSunkShips()}}}const F=document.querySelector("#app"),W=function(){const e=[Z(10),Z(10)];let t=!1,n=!1;function r(){return n}return{resetGame:function(){e.splice(0,e.length),a.push(Z(10),Z(10)),t=!1},registerAttack:function(n){return e[1*!t].receiveAttack(n),e[1*!t].getSunkShips().length===e[1*!t].peekAtShips().length},setAiPlayer:function(){n=!0,e[1].setRandomBoard()},puppeteer:function(e){switch(e){case"title-screen":F.appendChild(function(e){const t=document.createElement("div");t.id="title-screen",t.classList.add("container"),Object.assign(t.style,{paddingTop:"35vh"});const n=m();return n.textContent="Fancy Battleship.",n.style.fontWeight=600,n.addEventListener("click",(t=>{t.target.parentNode.remove(),e.puppeteer("pick-players")})),t.appendChild(n),t}(W));break;case"pick-players":F.appendChild(function(e){const t=document.createElement("div");t.id="pick-players",t.classList.add("container"),Object.assign(t.style,{paddingTop:"30vh"});const n=m();n.textContent="against a computer.",n.style.fontWeight=600,n.style.height="2.5em",n.addEventListener("click",(t=>{t.target.parentNode.remove(),e.setAiPlayer(),e.puppeteer("setup-prompt")})),t.appendChild(n);const r=m();return r.textContent="against a human.",r.style.fontWeight=600,r.style.height="2.5em",r.addEventListener("click",(t=>{t.target.parentNode.remove(),e.puppeteer("setup-prompt")})),t.appendChild(r),t}(W));break;case"game-view":F.appendChild(function(e){const t=document.createElement("div");return t.id="game-view",t.appendChild(A(!1,e)),t.appendChild(A(!0,e)),t}(W));break;case"next-player":F.appendChild(function(e){const t=document.createElement("div");t.id="next-player",t.classList.add("container"),Object.assign(t.style,{paddingTop:"40vh"});const n=m();return n.textContent=`player ${e.getCurrentPlayer()+1} is next..`,e.getCurrentPlayer()&&e.isAiPlaying()&&(n.textContent="computer made it's move.."),n.style.height="100px",n.style.fontWeight=600,n.addEventListener("click",(t=>{t.target.parentNode.remove(),e.getCurrentPlayer()&&e.isAiPlaying()&&(e.registerAImove(),e.cyclePlayer()),e.puppeteer("game-view")})),t.appendChild(n),t}(W));break;case"setup-prompt":F.appendChild(function(e){const t=document.createElement("div");t.id="setup-prompt",t.classList.add("container"),t.style.paddingTop="40vh";const n=m();return n.textContent=`player ${e.getCurrentPlayer()+1} to deploy ships..`,n.style.height="fit-content",n.style.padding="20px",n.addEventListener("click",(t=>{t.target.parentNode.remove(),e.puppeteer("setup-board")})),t.appendChild(n),t}(W));break;case"setup-board":F.appendChild(function(e){const t=document.createElement("div");t.classList.add("container"),t.id="setup-board",t.style.paddingTop="10vh";const n=m();n.id="done-button",n.textContent="deploying ships..",n.style.height="2em",n.style.padding="10px",n.addEventListener("click",(t=>{if(H()){if(t.target.parentNode.remove(),e.isAiPlaying())return e.deployAllShips(O),void e.puppeteer("next-player");e.getCurrentPlayer()?(e.deployAllShips(O),e.cyclePlayer(),e.puppeteer("next-player")):(e.deployAllShips(O),e.cyclePlayer(),e.puppeteer("setup-prompt")),M={},O=[],T={size:0,2:1,3:1,4:1,5:1}}})),t.appendChild(n);const r=v();for(const e of r.childNodes)e.addEventListener("click",(e=>{const t=parseInt(e.target.id.slice(1));if(!T.size)return;if(!T[T.size])return;const n=T.size,r="false"!==o.value,i=j(t,n,r*P);(r?z(i):N(i))&&(I(i)?console.log("taken"):(R(n,!1),Object.assign(M,Object.fromEntries(i.map((e=>[e,i])))),O.push([t,r,n]),$(i),H()&&(document.querySelector("#done-button").textContent="done?.")))}));t.appendChild(r);const o=function(){const e=document.createElement("button");return e.classList.add("toggle-orientation"),e.value=!1,e.textContent="Hor",e.style.backgroundColor="violet",e.addEventListener("click",(e=>{"false"===e.target.value?(e.target.value=!0,e.target.textContent="Ver",e.target.style.backgroundColor="lightgreen"):(e.target.value=!1,e.target.textContent="Hor",e.target.style.backgroundColor="violet")})),e}(),i=document.createElement("div");i.appendChild(o),i.classList.add("picker-container");for(let e=5;e>1;e--){const t=q(e),n=B(e);t.addEventListener("click",(t=>{const n=document.querySelector(".active-ship");n&&n.classList.remove("active-ship"),t.target.parentNode.classList.add("active-ship"),T.size=e})),i.appendChild(t),i.appendChild(n)}return t.appendChild(i),t}(W))}},getCurrentPlayer:function(){return t},deployAllShips:function(n){let r=t+1-1;for(const t of n)e[r].deployShip(...t)},getCurrentData:function(){return{ships:e[t+1-1].peekAtShips(),marks:e[t+1-1].getMarkedCells(),sunk:e[t+1-1].getSunkShips()}},getEnemyData:function(){return{ships:e[!t+1-1].peekAtShips(),marks:e[!t+1-1].getMarkedCells(),sunk:e[!t+1-1].getSunkShips()}},cyclePlayer:function(){t=!t},isAiPlaying:r,registerAImove:function(){const t=()=>Math.trunc(100*Math.random());if(r()){let n=t();for(;e[0].peekAtShipIndexes().includes(n);)n=t();e[0].receiveAttack(n)}}}}();W.puppeteer("title-screen")})()})();